jQuery.fn.pagination = function(e, t) {
    return t = jQuery.extend({
        items_per_page: 10,
        num_display_entries: 10,
        current_page: 0,
        num_edge_entries: 0,
        link_to: "javascript:void(0)",
        prev_text: "Prev",
        next_text: "Next",
        ellipse_text: "...",
        prev_show_always: !0,
        next_show_always: !0,
        callback: function() {
            return !1
        }
    }, t || {}), this.each(function() {
        function n() {
            return Math.ceil(e / t.items_per_page)
        }

        function r() {
            var e = Math.ceil(t.num_display_entries / 2),
                r = n(),
                a = r - t.num_display_entries,
                i = s > e ? Math.max(Math.min(s - e, a), 0) : 0,
                _ = s > e ? Math.min(s + e, r) : Math.min(t.num_display_entries, r);
            return [i, _]
        }

        function a(e, n) {
            s = e, i();
            var r = t.callback(e, _);
            return r || (n.stopPropagation ? n.stopPropagation() : n.cancelBubble = !0), r
        }

        function i() {
            _.empty();
            var e = r(),
                i = n(),
                l = function(e) {
                    return function(t) {
                        return a(e, t)
                    }
                },
                p = function(e, n) {
                    if (e = 0 > e ? 0 : i > e ? e : i - 1, n = jQuery.extend({
                            text: e + 1,
                            classes: ""
                        }, n || {}), e == s) var r = jQuery("<li>" + n.text + "</li>");
                    else {
                        var r = jQuery("<li></li>").bind("click", l(e));
                        r.append(jQuery("<a>" + n.text + "</a>").attr("href", t.link_to.replace(/__id__/, e)))
                    }
                    n.classes && r.addClass(n.classes), _.append(r)
                };
            if (t.prev_text && (s > 0 || t.prev_show_always) && p(s - 1, {
                    text: t.prev_text,
                    classes: "prev"
                }), e[0] > 0 && t.num_edge_entries > 0) {
                for (var u = Math.min(t.num_edge_entries, e[0]), c = 0; u > c; c++) p(c);
                t.num_edge_entries < e[0] && t.ellipse_text && jQuery("<li>" + t.ellipse_text + "</li>").appendTo(_)
            }
            for (var c = e[0]; c < e[1]; c++) p(c);
            if (e[1] < i && t.num_edge_entries > 0) {
                i - t.num_edge_entries > e[1] && t.ellipse_text && jQuery("<li>" + t.ellipse_text + "</li>").appendTo(_);
                for (var o = Math.max(i - t.num_edge_entries, e[1]), c = o; i > c; c++) p(c)
            }
            t.next_text && (i - 1 > s || t.next_show_always) && p(s + 1, {
                text: t.next_text,
                classes: "next"
            })
        }
        var s = t.current_page;
        e = !e || 0 > e ? 1 : e, t.items_per_page = !t.items_per_page || t.items_per_page < 0 ? 1 : t.items_per_page;
        var _ = jQuery(this);
        this.selectPage = function(e) {
            a(e)
        }, this.prevPage = function() {
            return s > 0 ? (a(s - 1), !0) : !1
        }, this.nextPage = function() {
            return s < n() - 1 ? (a(s + 1), !0) : !1
        }, i(), t.callback(s, this)
    })
};